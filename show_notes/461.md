# 461: This episdoe has a typo

Sponsored by us! Support our work through:

- Our [**courses at Talk Python Training**](https://training.talkpython.fm/)
- [**The Complete pytest Course**](https://courses.pythontest.com/p/the-complete-pytest-course)
- [**Patreon Supporters**](https://www.patreon.com/pythonbytes)

**Connect with the hosts**

- Michael: [@mkennedy@fosstodon.org](https://fosstodon.org/@mkennedy) / [@mkennedy.codes](https://bsky.app/profile/mkennedy.codes) (bsky)
- Brian: [@brianokken@fosstodon.org](https://fosstodon.org/@brianokken) / [@brianokken.bsky.social](https://bsky.app/profile/brianokken.bsky.social)
- Show: [@pythonbytes@fosstodon.org](https://fosstodon.org/@pythonbytes) / [@pythonbytes.fm](https://bsky.app/profile/pythonbytes.fm) (bsky)

Join us on YouTube at [**pythonbytes.fm/live**](https://pythonbytes.fm/stream/live) to be part of the audience. Usually **Monday** at 10am PT. Older video versions available there too.

Finally, if you want an artisanal, hand-crafted digest of every week of the show notes in email form? Add your name and email to [our friends of the show list](https://pythonbytes.fm/friends-of-the-show), we'll never share it.

**Michael #1: [PEP 798: Unpacking in Comprehensions](https://discuss.python.org/t/pep-798-unpacking-in-comprehensions/99435)**

- After careful deliberation, the Python Steering Council is pleased to accept PEP 798 – Unpacking in Comprehensions.
- Examples

```markdown
[*it for it in its]  # list with the concatenation of iterables in 'its'
{*it for it in its}  # set with the union of iterables in 'its'
{**d for d in dicts} # dict with the combination of dicts in 'dicts'
(*it for it in its)  # generator of the concatenation of iterables in 'its'
```

- Also: [The Steering Council is happy to unanimously accept “PEP 810, Explicit lazy imports”](https://discuss.python.org/t/pep-810-explicit-lazy-imports/104131/465)

**Brian #2: [Pandas 3.0.0rc0](https://github.com/pandas-dev/pandas/releases/tag/v3.0.0rc0)**

- Pandas 3.0.0 will be released soon, and we’re on Release candidate 0
- Here’s [What’s new in Pands 3.0.0](https://pandas.pydata.org/docs/dev/whatsnew/v3.0.0.html)
  - Dedicated string data type by default
    - Inferred by default for string data (instead of object dtype)
    - The str dtype can only hold strings (or missing values), in contrast to object dtype. (setitem with non string fails)
    - The missing value sentinel is always NaN (np.nan) and follows the same missing value semantics as the other default dtypes.
  - Copy-on-Write
    - The result of *any* indexing operation (subsetting a DataFrame or Series in any way, i.e. including accessing a DataFrame column as a Series) or any method returning a new DataFrame or Series, always *behaves as if* it were a copy in terms of user API.
    - As a consequence, if you want to modify an object (DataFrame or Series), the only way to do this is to directly modify that object itself.
  - pd.col syntax can now be used in DataFrame.assign() and DataFrame.loc()
    - You can now do this: `df.assign(c = pd.col('a') + pd.col('b'))`
  - New Deprecation Policy
  - [Plus more](https://pandas.pydata.org/docs/dev/whatsnew/v3.0.0.html#other-enhancements)
- 

**Michael #3: [typos](https://github.com/crate-ci/typos)**

- You’ve heard about codespell … what about [typos](https://github.com/crate-ci/typos)?
- [VSCode extension](https://marketplace.visualstudio.com/items?itemName=tekumara.typos-vscode) and [OpenVSX extension](https://open-vsx.org/extension/tekumara/typos-vscode).
- From Sky Kasko:

*Like codespell, typos checks for known misspellings instead of only allowing words from a dictionary. But typos has some extra features I really appreciate, like finding spelling mistakes inside snake_case or camelCase words. For example, if you have the line:*

```bash
*connecton_string = "sqlite:///my.db"*
```

*codespell won't find the misspelling, but typos will. It gave me the output:*

```bash
*error: `connecton` should be `connection`, `connector`  
╭▸ ./main.py:1:1  │1 │ connecton_string = "sqlite:///my.db"  
╰╴━━━━━━━━━*
```

*But the main advantage for me is that typos [has an LSP](https://github.com/tekumara/typos-lsp) that supports editor integrations like a [VS Code extension](https://marketplace.visualstudio.com/items?itemName=tekumara.typos-vscode). As far as I can tell, codespell [doesn't support editor integration](https://github.com/codespell-project/codespell/issues/1203). (Note that the popular [Code Spell Checker](https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker) VS Code extension is an unrelated project that uses a traditional dictionary approach.)*

*For more on the differences between codespell and typos, here's a comparison table I found in the typos repo: https://github.com/crate-ci/typos/blob/master/docs/comparison.md*

*By the way, though it's not mentioned in the [installation instructions](https://github.com/crate-ci/typos#install), typos is [published on PyPI](https://pypi.org/project/typos/) and can be installed with uv tool install typos, for example. That said, I don't bother installing it, I just use the VS Code extension and run it as a [pre-commit hook](https://github.com/crate-ci/typos/blob/master/docs/pre-commit.md). (By the way, I'm using [prek](https://prek.j178.dev/) instead of pre-commit now; thanks for the tip on episode #448!) It looks like typos also publishes a [GitHub action](https://github.com/crate-ci/typos/blob/master/docs/github-action.md), though I haven't used it.*

**Brian #4: A couple testing topics**

- [slowlify](https://github.com/pablogsal/slowlify)
  - suggested by Brian Skinn
  - Simulate slow, overloaded, or resource-constrained machines to reproduce CI failures and hunt flaky tests.
  - Requires Linux with cgroups v2
- [Why your mock breaks later](https://nedbatchelder.com/blog/202511/why_your_mock_breaks_later.html)
  - Ned Badthelder
  - Ned’s taught us before to “Mock where the object is used, not where it’s defined.”
  - To be more explicit, but probably more confusing to mock-newbies, “don’t mock things that get imported, mock the object in the file it got imported to.”
    - See? That’s probably worse. Anyway, read Ned’s post.
  - If my project `myproduct` has [`user.py`](http://user.py) that uses the system builtin `open()` and we want to patch it:
    - DONT DO THIS: `@patch("builtins.open")`
      - This patches `open()` for the whole system
    - DO THIS: `@patch("myproduct.user.open")`
      - This patches `open()` for just the [`user.py`](http://user.py) file, which is what we want
  - Apparently this issue [is common](https://github.com/search?type=code&q=patch+builtins.open+language%3APython+path%3A"test") and is mucking up using `coverage.py`

**Extras**

Brian:

- [The Rise and Rise of FastAPI - mini documentary](https://www.youtube.com/watch?v=mpR8ngthqiE)
- [“Building on Lean” chapter of LeanTDD is out](https://courses.pythontest.com/lean-tdd/)
  - The next chapter I’m working on is “Finding Waste in TDD”
  - Notes to delete before end of show:
    - I’m not on track for an end of year completion of the first pass, so pushing goal to 1/31/26
    - As requested by a reader, I’m releasing both the full-so-far versions and most-recent-chapter

Michael:

- [My Vanishing Gradient’s episode](https://vanishinggradients.fireside.fm/64) is out
- [Django 6 is out](https://www.djangoproject.com/weblog/2025/dec/03/django-60-released/?utm_source=www.pythonweekly.com&utm_medium=newsletter&utm_campaign=python-weekly-issue-724-december-4-2025&_bhlid=99bc347f380ddfd4b067e6b665595832be7447f2)

**Joke:** [tabloid](https://github.com/thesephist/tabloid) - A minimal programming language inspired by clickbait headlines